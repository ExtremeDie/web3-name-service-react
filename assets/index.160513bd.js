import{C as e,R as t,W as n,a,p as i,b as s}from"./vendor.025299bb.js";var o=[{inputs:[{internalType:"string",name:"_tld",type:"string"}],stateMutability:"payable",type:"constructor"},{inputs:[],name:"AlreadyRegistered",type:"error"},{inputs:[{internalType:"string",name:"name",type:"string"}],name:"InvalidName",type:"error"},{inputs:[],name:"Unauthorized",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"domains",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"}],name:"getAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllNames",outputs:[{internalType:"string[]",name:"",type:"string[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"}],name:"getRecord",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"names",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"}],name:"price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"records",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"}],name:"register",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"record",type:"string"}],name:"setRecord",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"tld",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"}],name:"valid",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}];const r={"0x1":"Mainnet","0x3":"Ropsten","0x2a":"Kovan","0x4":"Rinkeby","0x5":"Goerli","0x61":"BSC Testnet","0x38":"BSC Mainnet","0x89":"Polygon Mainnet","0x13881":"Polygon Mumbai Testnet","0xa86a":"AVAX Mainnet"},l="0x907e7a4E61CE619C2E254c74Babd40449aC60b68",p=()=>{const[s,p]=e.exports.useState(""),[m,u]=e.exports.useState(""),[c,y]=e.exports.useState(""),[d,g]=e.exports.useState(""),[b,w]=e.exports.useState(!1),[h,T]=e.exports.useState([]),[f,A]=e.exports.useState(!1),v=async()=>{if(window.ethereum)try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x13881"}]})}catch(e){if(4902===e.code)try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x13881",chainName:"Polygon Mumbai Testnet",rpcUrls:["https://rpc-mumbai.maticvigil.com/"],nativeCurrency:{name:"Mumbai Matic",symbol:"MATIC",decimals:18},blockExplorerUrls:["https://mumbai.polygonscan.com/"]}]})}catch(t){console.log(t)}console.log(e)}else alert("MetaMask is not installed. Please install it to use this app: https://metamask.io/download.html")},E=async()=>{try{const{ethereum:e}=window;if(!e)return void alert("Get MetaMask -> https://metamask.io/");const t=await e.request({method:"eth_requestAccounts"});console.log("Connected",t[0]),p(t[0])}catch(e){console.log(e)}},M=async()=>{if(!m)return;if(m.length<3)return void alert("Domain must be at least 3 characters long");const e=3===m.length?"0.5":4===m.length?"0.3":"0.1";console.log("Minting domain",m,"with price",e);try{const{ethereum:t}=window;if(t){const s=new n(t).getSigner(),r=new a(l,o,s);console.log("Going to pop wallet now to pay gas...");let p=await r.register(m,{value:i(e)});1===(await p.wait()).status?(console.log("Domain minted! https://mumbai.polygonscan.com/tx/"+p.hash),p=await r.setRecord(m,c),await p.wait(),console.log("Record set! https://mumbai.polygonscan.com/tx/"+p.hash),y(""),u("")):alert("Transaction failed! Please try again")}}catch(t){console.log(t)}},N=async()=>{try{const{ethereum:e}=window;if(e){const t=new n(e).getSigner(),i=new a(l,o,t),s=await i.getAllNames(),r=await Promise.all(s.map((async e=>{const t=await i.records(e),n=await i.domains(e);return{id:s.indexOf(e),name:e,record:t,owner:n}})));console.log("MINTS FETCHED ",r),T(r)}}catch(e){console.log(e)}},x=e=>{console.log("Editing record for",e),w(!0),u(e)},k=async()=>{if(c&&m){A(!0),console.log("Updating domain",m,"with record",c);try{const{ethereum:e}=window;if(e){const t=new n(e).getSigner(),i=new a(l,o,t);let s=await i.setRecord(m,c);await s.wait(),console.log("Record set https://mumbai.polygonscan.com/tx/"+s.hash),N(),y(""),u("")}}catch(e){console.log(e)}A(!1)}};return e.exports.useEffect((()=>{(async()=>{const{ethereum:e}=window;if(!e)return void console.log("Make sure you have metamask!");console.log("We have the ethereum object",e);const t=await e.request({method:"eth_accounts"});if(0!==t.length){const e=t[0];console.log("Found an authorized account:",e),p(e)}else console.log("No authorized account found");const n=await e.request({method:"eth_chainId"});g(r[n]),e.on("chainChanged",(function(e){window.location.reload()}))})()}),[]),e.exports.useEffect((()=>{"Polygon Mumbai Testnet"===d&&N()}),[s,d]),t.createElement("div",{className:"App"},t.createElement("div",{className:"container"},t.createElement("div",{className:"header-container"},t.createElement("header",null,t.createElement("div",{className:"left"},t.createElement("p",{className:"title"},"ðŸ±â€ðŸ‘¤ Ninja Name Service"),t.createElement("p",{className:"subtitle"},"Your immortal API on the blockchain!")),t.createElement("div",{className:"right"},t.createElement("img",{alt:"Network logo",className:"logo",src:d.includes("Polygon")?"/web3-name-service-react/assets/polygonlogo.32a6f90e.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAA1CAYAAADh5qNwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJISURBVHgB3ZqPcYIwFIefnaAjpBt0A92gbqAb6Aa6gd3AbmA3wA06AiPoBr++HNwJmAeJkH98d5x3EkgeefkIAaJAADjy9k5zgYPZouJAc4GDKfFAUe7UadekoJzRvQIza8oVbvxZCKrMUhoNOUjkJw205SChKBcMcpDIQxqQ5SCRvjQgy0GiRMrSwLAcJE6UKrCTg8QnpQbs5SCRljTgLgeJDaUC3OUgcUMK0sDrcpCILw2Mk4PEKGm80Qi48iP/KJqeOL2F6eQgEV4aXOkFfgkrDUwvB4kwaaivHvzIQWJFjrwiij35kYOE34dJ+JeDxN6lnQuXwnzyC//EeP658/axWCzuNoWt048D2lKcgDTagtZp6DKmrrz9UByuvP2SL7jHvhDOfvpetaNQ6MHrObgTfN98uYJPdJa0UNnwjGkpeFt26lnBx5MxHjfdo2Gfwvhe06m2MZxXT8fO5AtUvYU6gI1h/xavBXdAI9VQXcBjHWiJAGm4bzRGX0XV2e+SkoXh+BXaFybMgkzdmCYnIbg/IZgSz+NGGc4bbr29bsDN0NChlNTHHCCnWut8FBqudA25F1SnrG74zvD/GuYxeEOslweo0k7iLDUMlXCKnmPD3XANjRt6ttL7Np3y3+jHn75tQWWrIUqYx42pnKIUQDX4p2BJKYH+MWJDeq9LYda8LeH1bQvasw1b4unbFrivB8bTty1wW0KLr29bYK95RTmB/tmGJs9PeSDP0vP9RA7CbJ5yB8+aVzQH8JhtzOrLTK35YG8H/wEkMZSe8ht9mQAAAABJRU5ErkJggg=="}),s?t.createElement("p",null," ","Wallet: ",s.slice(0,6),"...",s.slice(-4)," "):t.createElement("p",null," Not connected ")))),!s&&t.createElement("div",{className:"connect-wallet-container"},t.createElement("img",{src:"https://media.giphy.com/media/3ohhwytHcusSCXXOUg/giphy.gif",alt:"Ninja gif"}),t.createElement("button",{onClick:E,className:"cta-button connect-wallet-button"},"Connect Wallet")),s&&("Polygon Mumbai Testnet"!==d?t.createElement("div",{className:"connect-wallet-container"},t.createElement("h2",null,"Please switch to Polygon Mumbai Testnet"),t.createElement("button",{className:"cta-button mint-button",onClick:v},"Click here to switch")):t.createElement("div",{className:"form-container"},t.createElement("div",{className:"first-row"},t.createElement("input",{type:"text",value:m,placeholder:"domain",onChange:e=>u(e.target.value)}),t.createElement("p",{className:"tld"}," ",".ninja"," ")),t.createElement("input",{type:"text",value:c,placeholder:"whats ur ninja power?",onChange:e=>y(e.target.value)}),b?t.createElement("div",{className:"button-container"},t.createElement("button",{className:"cta-button mint-button",disabled:f,onClick:k},"Set record"),t.createElement("button",{className:"cta-button mint-button",onClick:()=>{w(!1)}},"Cancel")):t.createElement("button",{className:"cta-button mint-button",disabled:f,onClick:M},"Mint"))),h&&(()=>{if(s&&h.length>0)return t.createElement("div",{className:"mint-container"},t.createElement("p",{className:"subtitle"}," Recently minted domains!"),t.createElement("div",{className:"mint-list"},h.map(((e,n)=>t.createElement("div",{className:"mint-item",key:n},t.createElement("div",{className:"mint-row"},t.createElement("a",{className:"link",href:`https://testnets.opensea.io/assets/mumbai/${l}/${e.id}`,target:"_blank",rel:"noopener noreferrer"},t.createElement("p",{className:"underlined"}," ",e.name,".ninja"," ")),e.owner.toLowerCase()===s.toLowerCase()?t.createElement("button",{className:"edit-button",onClick:()=>x(e.name)},t.createElement("img",{className:"edit-icon",src:"https://img.icons8.com/metro/26/000000/pencil.png",alt:"Edit button"})):null),t.createElement("p",null," ",e.record," "))))))})(),t.createElement("div",{className:"footer-container"},t.createElement("img",{alt:"Twitter Logo",className:"twitter-logo",src:"/web3-name-service-react/assets/twitter-logo.9ba75b84.svg"}),t.createElement("a",{className:"footer-text",href:"https://twitter.com/_buildspace",target:"_blank",rel:"noreferrer"},"built with @_buildspace"))))};s.render(t.createElement(t.StrictMode,null,t.createElement(p,null)),document.getElementById("root"));
